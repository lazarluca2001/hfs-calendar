async function init() {
    try {
        const [resW, resE] = await Promise.all([fetch(wishlistUrl), fetch(eredmenyekUrl)]);
        const csvW = await resW.text(), csvE = await resE.text();
        
        // 1. Wishlist feldolgozása
        const rowsW = csvW.split('\n').map(r => r.split(',').map(c => c.trim().replace(/"/g, '')));
        const headersW = rowsW[3];
        for(let i = 4; i < rowsW.length; i++) {
            let obj = {}; headersW.forEach((h, idx) => { if(h) obj[h] = rowsW[i][idx]; });
            if(obj.Event) allWishlistEvents.push(obj);
        }

        // 2. Eredmények feldolgozása - OSZLOPKERESŐVEL
        const rowsE = csvE.split('\n').map(r => r.split(',').map(c => c.trim().replace(/"/g, '')));
        const headersE = rowsE[4]; // Az 5. sor a fejléc (index 4)

        // Megkeressük, melyik oszlopban mi van
        const idxName = headersE.findIndex(h => h.toLowerCase().includes('name'));
        const idxDiv = headersE.findIndex(h => h.toLowerCase().includes('division') || h.toLowerCase().includes('level'));
        const idxEvent = headersE.findIndex(h => h.toLowerCase().includes('event'));
        const idxDate = headersE.findIndex(h => h.toLowerCase().includes('date'));
        const idxFinal = headersE.findIndex(h => h.toLowerCase().includes('final'));
        const idxPoint = headersE.findIndex(h => h.toLowerCase().includes('point'));

        console.log("Oszlop indexek:", {idxName, idxDiv, idxEvent, idxPoint}); // Debughoz

        for(let i = 5; i < rowsE.length; i++) {
            const r = rowsE[i];
            if(!r[idxName]) continue;
            
            pastResults.push({
                Name: r[idxName].trim(),
                Level: r[idxDiv] ? r[idxDiv].trim() : "Ismeretlen",
                Event: r[idxEvent] ? r[idxEvent].trim() : "",
                Date: r[idxDate] ? r[idxDate].trim() : "",
                Final: r[idxFinal] ? r[idxFinal].trim() : "",
                Point: r[idxPoint] ? r[idxPoint].trim() : "0"
            });
        }

        setupMonthSelect();
        render(new Date().getMonth());
    } catch (e) { console.error("Hiba:", e); }
}
